<div class="min-vh-100 min-vw-100 " style="background: linear-gradient(to right, #f0f8ff, #d0f0e8); ">
  <div class="container py-4" style="max-width: 750px;">
    <!-- Header -->
    <div class="text-center mb-2">
      <div class="card border-10 shadow mb-2" style="background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(6px);">
        <div class="card-body py-2 px-2">
          <div class="d-flex align-items-center justify-content-center">
            <div class="p-1 rounded-2 me-2" [ngClass]="getCurrentStep().bgColor">
              <i [ngClass]="getCurrentStep().icon + ' fs-6 ' + getCurrentStep().textColor"></i>
            </div>
            <div>
              <h1 class="h6 fw-bold mb-0">QuickFund Loan Application</h1>
              <p class="text-muted small mb-0">{{ getCurrentStep().label }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Progress Steps -->
      <div class="card border-0 shadow" style="background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(6px);">
        <div class="card-body py-2 px-2">
          <div class="row g-1 mb-2">
            <div class="col-6 col-md-3" *ngFor="let step of steps; let i = index">
              <div class="d-flex flex-column align-items-center">
                <!-- Step Circle -->
                <div class="step-circle mb-1"
                     [ngClass]="{
                       'active': isStepActive(i),
                       'completed': isStepCompleted(i),
                       'pending': !isStepActive(i) && !isStepCompleted(i)
                     }"
                     style="width: 28px; height: 28px; font-size: 0.7rem;">
                  <i *ngIf="isStepCompleted(i)" class="bi bi-check-lg"></i>
                  <i *ngIf="!isStepCompleted(i)" [ngClass]="step.icon"></i>
                </div>

                <!-- Step Label -->
                <div class="text-center">
                  <small class="fw-medium d-block"
                         [ngClass]="{
                           'text-primary': isStepActive(i),
                           'text-success': isStepCompleted(i),
                           'text-muted': !isStepActive(i) && !isStepCompleted(i)
                         }"
                         style="font-size: 0.7rem;">
                    {{ step.shortLabel }}
                  </small>
                  <small class="text-muted" style="font-size: 0.65rem;">Step {{ i + 1 }}</small>
                </div>
              </div>
            </div>
          </div>

          <!-- Progress Bar -->
          <div class="progress" style="height: 4px;">
            <div class="progress-bar"
                 role="progressbar"
                 [style.width.%]="getProgressPercentage()"
                 [attr.aria-valuenow]="getProgressPercentage()"
                 aria-valuemin="0"
                 aria-valuemax="100"
                 style="background: linear-gradient(to right, #2563eb, #9f28f9, #16a34a);">
            </div>
          </div>

          <!-- Progress Text -->
          <div class="d-flex justify-content-between mt-1">
            <small class="text-muted" style="font-size: 0.7rem;">{{ getCurrentStepIndex() + 1 }}/{{ steps.length }}</small>
            <small class="text-muted" style="font-size: 0.7rem;">{{ getProgressPercentage() }}%</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="card border-0 shadow" style="background: rgba(255, 255, 255, 0.95);">
      <div class="card-body p-2 p-md-3">
        <!-- Personal Details Step -->
        <app-personal-details 
          *ngIf="currentPage === 'personal'"
          (onNext)="navigateTo('loan-docs')">
        </app-personal-details>

        <!-- Loan Details & Documents Step -->
        <app-loan-details-and-documents 
          *ngIf="currentPage === 'loan-docs'"
          (onBack)="navigateTo('personal')"
          (onNext)="navigateTo('review')">
        </app-loan-details-and-documents>

        <!-- Review Application Step -->
        <app-review-application 
          *ngIf="currentPage === 'review'"
          (onBack)="navigateTo('loan-docs')"
          (onSubmit)="navigateTo('submitted')">
        </app-review-application>

        <!-- Application Submitted Step -->
        <app-application-submitted 
          *ngIf="currentPage === 'submitted'"
          (onNewApplication)="navigateTo('personal')">
        </app-application-submitted>
      </div>
    </div>

    <!-- Footer -->
    <div class="text-center mt-2">
      <div class="d-inline-flex align-items-center px-2 py-1 rounded-pill"
           style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(6px); font-size: 0.7rem;">
        <div class="bg-primary rounded-circle me-1" style="width: 5px; height: 5px;"></div>
        <small class="text-muted">Secure & Encrypted</small>
        <div class="bg-success rounded-circle ms-1" style="width: 5px; height: 5px;"></div>
      </div>
    </div>
  </div>
</div>
